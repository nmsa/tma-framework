"use strict";(self.webpackChunktma_dashboard=self.webpackChunktma_dashboard||[]).push([[978],{6117:function(e,n,t){var r=t(1413),i=t(885),a=t(2791),o=t(6739),l=t(1460),s=t(834),c=t(6871),d=t(184);n.Z=function(e){var n=(0,c.s0)(),t=(0,a.useState)({successPath:e.successPath,openModal:!1,messageType:null,message:null}),u=(0,i.Z)(t,2),m=u[0],h=u[1];function p(t,i){"success"===m.messageType&&n(m.successPath),e.modalInfo.openModal=!1,h((0,r.Z)((0,r.Z)({},m),{},{openModal:!1}))}return(0,a.useEffect)((function(){h((0,r.Z)((0,r.Z)({},m),{},{openModal:e.modalInfo.openModal,messageType:e.modalInfo.messageType,message:e.modalInfo.message}))}),[e]),(0,d.jsxs)(o.Z,{centered:!1,closeIcon:!0,open:m.openModal,onClose:p,children:[(0,d.jsx)(o.Z.Header,{children:"Message"}),(0,d.jsx)(o.Z.Content,{children:(0,d.jsx)(l.Z,{color:"success"===m.messageType?"green":"warning"===m.messageType?"orange":"red",children:(0,d.jsx)(l.Z.Header,{children:m.message})})}),(0,d.jsx)(o.Z.Actions,{children:(0,d.jsx)(s.Z,{color:"grey",onClick:p,children:"Close"})})]})}},5978:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(1413),i=t(7762),a=t(5861),o=t(885),l=t(7757),s=t.n(l),c=t(4581),d=t(2966),u=t(4863),m=t(2417),h=t(6605),p=t(899),g=t(9402),v=t(6303),x=t(1460),Z=t(5409),f=t(2791),b=t(5392);var M=function(){function e(n,t){if(t.includes(n.metricId))return!1;t.push(n.metricId);var r,a=(0,i.Z)(n.childMetrics);try{for(a.s();!(r=a.n()).done;){if(!1===e(r.value,t))return!1}}catch(o){a.e(o)}finally{a.f()}return!0}return{validChildMetrics:function(n){var t,r=[],a=(0,i.Z)(n);try{for(a.s();!(t=a.n()).done;){if(!1===e(t.value,r))return!1}}catch(o){a.e(o)}finally{a.f()}return!0}}},S=t(2043),O=t(5051),j=t(6117),y=t(184);var k=function(e){var n=(0,f.useState)(null),t=(0,o.Z)(n,2),l=t[0],k=t[1],D=(0,f.useState)(null),w=(0,o.Z)(D,2),A=w[0],T=w[1],C=(0,f.useState)({valid:!1,metricId:-1,metricName:"",childMetrics:[],attributeAggregationOperator:"",metricAggregationOperator:"",numSamples:null,normalizationMethod:"",normalizationKind:"",minimumThreshold:null,maximumThreshold:null,descriptionId:""}),N=(0,o.Z)(C,2),I=N[0],z=N[1],P=(0,f.useState)(!1),q=(0,o.Z)(P,2),B=q[0],K=q[1],F=(0,f.useState)(!1),G=(0,o.Z)(F,2),E=G[0],J=G[1],H=(0,f.useState)({openModal:!1}),R=(0,o.Z)(H,2),X=R[0],_=R[1];function L(){return(L=(0,a.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(null);case 2:return n=e.sent,e.next=5,Q(null);case 5:t=e.sent,(0,S.Z)().convertMetrics(t,T),(0,S.Z)().convertDescriptions(n,k);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return(0,Z.Z)().getDescriptions(e)}function Q(e){return(0,Z.Z)().getMetrics(e)}function U(){return(U=(0,a.Z)(s().mark((function e(n,t){var a,o,l,c,d,u,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.value,l=function(e){o=e},c=[],d=(0,i.Z)(a),e.prev=4,d.s();case 6:if((u=d.n()).done){e.next=13;break}return m=u.value,e.next=10,(0,Z.Z)().getMetricById(m,l);case 10:c.push(o);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),d.e(e.t0);case 18:return e.prev=18,d.f(),e.finish(18);case 21:M().validChildMetrics(c)?z((0,r.Z)((0,r.Z)({},I),{},{childMetrics:c,valid:!0})):z((0,r.Z)((0,r.Z)({},I),{},{childMetrics:c,valid:!1}));case 22:case"end":return e.stop()}}),e,null,[[4,15,18,21]])})))).apply(this,arguments)}function V(){return(V=(0,a.Z)(s().mark((function e(n){var t,r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!B){e.next=19;break}if(!(0,O.Z)().validStringOrDropDownSelection(I.metricName)){e.next=17;break}if(!(0,O.Z)().validStringOrDropDownSelection(I.descriptionId)){e.next=17;break}if(!(0,O.Z)().validStringOrDropDownSelection(I.metricAggregationOperator)){e.next=17;break}if(!(0,O.Z)().validIntGreaterOrEqualThanZero(I.numSamples)){e.next=17;break}if(!(0,O.Z)().validStringOrDropDownSelection(I.normalizationMethod)){e.next=17;break}if(!(0,O.Z)().validStringOrDropDownSelection(I.normalizationKind)){e.next=17;break}if(!(0,O.Z)().validFloat(I.minimumThreshold)){e.next=17;break}if(!(0,O.Z)().validFloat(I.maximumThreshold)){e.next=17;break}return t={metricName:I.metricName,childMetrics:I.childMetrics,leafAttribute:{metricAggregationOperator:I.metricAggregationOperator,numSamples:I.numSamples,normalizationMethod:I.normalizationMethod,normalizationKind:I.normalizationKind,minimumThreshold:I.minimumThreshold,maximumThreshold:I.maximumThreshold,description:{descriptionId:I.descriptionId}}},e.next=13,(0,Z.Z)().createMetric(t);case 13:return(r=e.sent).openModal=!0,_(r),e.abrupt("return");case 17:e.next=34;break;case 19:if(!(0,O.Z)().validStringOrDropDownSelection(I.metricName)){e.next=34;break}if(!(0,O.Z)().validStringOrDropDownSelection(I.attributeAggregationOperator)){e.next=34;break}if(!(0,O.Z)().validDropDownMultipleSelection(I.childMetrics)){e.next=34;break}if(!I.valid){e.next=32;break}return i={metricName:I.metricName,childMetrics:I.childMetrics,attributeAggregationOperator:I.attributeAggregationOperator},e.next=26,(0,Z.Z)().createMetric(i);case 26:return(a=e.sent).openModal=!0,_(a),e.abrupt("return");case 32:return _({messageType:"error",message:"Currently selected child metrics are not valid because, at least, one of the descendant nodes gets repeated",openModal:!0}),e.abrupt("return");case 34:_({messageType:"error",message:"Please fill in all the required fields (marked with  * ) and respect the fields notes",openModal:!0}),J(!0);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,n){var t=JSON.parse(JSON.stringify(I));t[n.name]=n.value,z(t)}return(0,f.useEffect)((function(){!function(){L.apply(this,arguments)}()}),[]),(0,y.jsxs)("div",{children:[(0,y.jsx)(c.Z,{centered:!0,children:(0,y.jsx)(c.Z.Row,{children:(0,y.jsx)(c.Z.Column,{width:15,children:(0,y.jsx)(d.Z,{section:!0,horizontal:!0,children:(0,y.jsx)(u.Z,{as:"h1",textAlign:"center",children:"Create Metric"})})})})}),null===A||null===l?(0,y.jsxs)("div",{children:[(0,y.jsx)(m.Z,{active:!0,inline:"centered",children:" Retrieving content "}),(0,y.jsx)("br",{})]}):(0,y.jsxs)(h.Z,{children:[(0,y.jsx)(p.Z,{children:(0,y.jsxs)(g.Z,{widths:"equal",children:[(0,y.jsxs)(g.Z.Group,{children:[(0,y.jsx)(g.Z.Input,{required:!0,name:"metricName",label:"Metric name",onChange:Y,error:E&&!(0,O.Z)().validStringOrDropDownSelection(I.metricName)?{content:"Please enter a name for the Metric",pointing:"above"}:null}),(0,y.jsx)(g.Z.Button,{color:"grey",circular:!0,type:"submit",floated:"right",onClick:function(e){return V.apply(this,arguments)},children:"Create Metric"})]}),(0,y.jsx)(g.Z.Checkbox,{onClick:function(){var e=JSON.parse(JSON.stringify(I));B?(e.childMetrics=[],e.metricAggregationOperator="",e.numSamples=null,e.normalizationMethod="",e.normalizationKind="",e.minimumThreshold=null,e.maximumThreshold=null,z(e)):(e.attributeAggregationOperator="",e.childMetrics=[],e.valid=!0,z(e)),K(!B)},toggle:!0,label:"Leaf Attribute?"}),B?(0,y.jsxs)("div",{children:[(0,y.jsxs)(g.Z.Group,{children:[(0,y.jsx)(g.Z.Dropdown,{selectOnBlur:!1,selectOnNavigation:!1,required:!0,clearable:!0,search:!0,selection:!0,options:l,placeholder:"Filter descriptions by something",label:"Associate Description",onChange:Y,name:"descriptionId",error:E&&!(0,O.Z)().validStringOrDropDownSelection(I.descriptionId)?{content:"Please choose a description",pointing:"above"}:null}),(0,y.jsx)(g.Z.Dropdown,{selectOnBlur:!1,selectOnNavigation:!1,required:!0,clearable:!0,selection:!0,options:[{key:0,value:0,text:"Average"},{key:1,value:1,text:"Minimum"},{key:2,value:2,text:"Maximum"},{key:3,value:3,text:"Sum"}],label:"Metric Aggregation Operator",onChange:Y,name:"metricAggregationOperator",error:E&&!(0,O.Z)().validStringOrDropDownSelection(I.metricAggregationOperator)?{content:"Please select an aggregation operator",pointing:"above"}:null}),(0,y.jsx)(g.Z.Dropdown,{selectOnBlur:!1,selectOnNavigation:!1,required:!0,clearable:!0,selection:!0,options:[{key:0,value:"MIN-MAX",text:"MIN-MAX"}],label:"Normalization Method",onChange:Y,name:"normalizationMethod",error:E&&!(0,O.Z)().validStringOrDropDownSelection(I.normalizationMethod)?{content:"Please select a normalization method",pointing:"above"}:null}),(0,y.jsx)(g.Z.Dropdown,{selectOnBlur:!1,selectOnNavigation:!1,required:!0,clearable:!0,selection:!0,options:[{key:0,value:0,text:"BENEFIT"},{key:1,value:1,text:"COST"}],label:"Normalization Kind",onChange:Y,name:"normalizationKind",error:E&&!(0,O.Z)().validStringOrDropDownSelection(I.normalizationKind)?{content:"Please select a normalization kind",pointing:"above"}:null})]}),(0,y.jsxs)(g.Z.Group,{children:[(0,y.jsx)(g.Z.Input,{required:!0,name:"numSamples",label:"Number of Samples",onChange:Y,error:E&&!(0,O.Z)().validIntGreaterThanZero(I.numSamples)?{content:"Please enter an integer number > 0",pointing:"above"}:null}),(0,y.jsx)(g.Z.Input,{required:!0,name:"minimumThreshold",label:"Minimum Threshold",onChange:Y,error:E&&!(0,O.Z)().validFloat(I.minimumThreshold)?{content:"Please enter a float number like 2.33",pointing:"above"}:null}),(0,y.jsx)(g.Z.Input,{required:!0,name:"maximumThreshold",label:"Maximum Threshold",onChange:Y,error:E&&!(0,O.Z)().validFloat(I.maximumThreshold)?{content:"Please enter a float number like 2.33",pointing:"above"}:null})]})]}):(0,y.jsxs)("div",{children:[(0,y.jsx)(d.Z,{section:!0,horizontal:!0,children:(0,y.jsx)(u.Z,{as:"h3",textAlign:"center",children:" Associate child metrics and preview metric tree"})}),(0,y.jsxs)(g.Z.Group,{children:[(0,y.jsx)(g.Z.Dropdown,{onChange:function(e,n){return U.apply(this,arguments)},selectOnBlur:!1,selectOnNavigation:!1,required:!0,clearable:!0,search:!0,selection:!0,multiple:!0,options:A,placeholder:"Filter metrics by something",label:"Associate child metrics",name:"childMetrics",error:E&&!(0,O.Z)().validDropDownMultipleSelection(I.childMetrics)?{content:"Please choose, at least, one child metric",pointing:"above"}:null}),(0,y.jsx)(g.Z.Dropdown,{selectOnBlur:!1,selectOnNavigation:!1,required:!0,clearable:!0,selection:!0,options:[{key:0,value:0,text:"Neutrality"},{key:1,value:1,text:"Simultaneity"},{key:2,value:2,text:"Replaceability"}],label:"Attribute Aggregation Operator",onChange:Y,name:"attributeAggregationOperator",error:E&&!(0,O.Z)().validStringOrDropDownSelection(I.attributeAggregationOperator)?{content:"Please select an attribute aggregation operator",pointing:"above"}:null})]}),""===I.metricName||0===I.childMetrics.length?(0,y.jsxs)(v.Z,{ribbon:!0,as:"b",color:"grey",children:[(0,y.jsx)(u.Z,{as:"h3",children:" Warning! "}),"Metric tree will only be displayed once a name is given for the metric and, at least, one child metric is selected"]}):I.valid?(0,y.jsx)(b.Z,{width:"100%",height:"50vh",data:I}):(0,y.jsxs)(x.Z,{negative:!0,children:[(0,y.jsx)(x.Z.Header,{children:"Can't generate metric tree"}),(0,y.jsx)("p",{children:"At least one of the descendant metrics is repeated with the current list of chosen child metrics"})]})]})]})}),(0,y.jsx)(j.Z,{successPath:"/getMetrics",modalInfo:X})]})]})}}}]);
//# sourceMappingURL=978.dee7485d.chunk.js.map